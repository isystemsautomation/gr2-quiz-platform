<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Chestionare Electricieni Grupa 2</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <a href="{% url 'dashboard' %}" class="header-logo">
                <img src="{% static 'img/logo.png' %}" alt="Siglă companie">
                <span class="header-logo-text">Platformă internă chestionare Electricieni – Grupa 2</span>
            </a>
            <nav class="header-nav">
                <a href="{% url 'dashboard' %}">Dashboard</a>
                <a href="{% url 'logout' %}">Logout</a>
            </nav>
        </div>
    </header>

    <div class="main-container">
        <div class="instructions-card">
            <h3>Instrucțiuni</h3>
            <ul>
                <li>Selectează categoria (Grupa 2A sau Grupa 2B), apoi disciplina.</li>
                <li>Lucrează blocurile pe rând. Fiecare bloc are ~20 întrebări (ultimul poate avea mai puține).</li>
                <li>Culoarea blocului reprezintă ultima încercare: Alb = neînceput, Roșu = 0–17 corecte, Galben = 18–19 corecte, Verde = toate corecte.</li>
                <li>După trimitere, vei vedea răspunsurile și explicațiile (dacă sunt completate).</li>
                <li>Dacă lipsesc răspunsuri corecte/explicații, le poți completa (dacă funcția este activă).</li>
            </ul>
        </div>

        <div class="card" style="margin-top: 1rem; margin-bottom: 2rem;">
            <h1 class="page-title" style="margin-bottom: 0;">Dashboard</h1>
        </div>

        {% for subject in subjects %}
            <div class="card subject-section">
                <h3 class="section-title">{{ subject.title }}</h3>
                <div class="blocks-grid">
                    {% for block in subject.blocks %}
                        <a href="{% url 'block_take' subject.id block.number %}" class="block-tile {{ block.color_class }}">
                            <div class="block-number">Bloc {{ block.number }}</div>
                            <div class="block-score">
                                {% if block.last_attempt %}
                                    {{ block.last_attempt.score }}/{{ block.last_attempt.total }}
                                {% else %}
                                    —
                                {% endif %}
                            </div>
                            {% if block.note %}
                                <div class="block-note-indicator">Notă salvată</div>
                                <div class="block-note-text">
                                    {{ block.note|truncatechars:60 }}
                                </div>
                            {% endif %}
                        </a>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</body>
</html>
